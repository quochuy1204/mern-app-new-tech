(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a(1),c=a.n(s),n=a(20),i=a.n(n),o=(a(44),a(3)),u=a.n(o),l=a(6),j=a(11),d=a(10),b=a(5),p=a.n(b);var O=function(){var e=Object(d.c)((function(e){return e.auth})),t=e.user,a=e.isLogged,s=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/users/logout");case 3:localStorage.removeItem("firstLogin"),window.location.href="/",e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.location.href="/";case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),c={transform:a?"translateY(-5px)":0};return Object(r.jsxs)("header",{children:[Object(r.jsx)("div",{className:"logo",children:Object(r.jsx)("h1",{children:Object(r.jsx)(j.b,{to:"/",children:"Logo"})})}),Object(r.jsx)("ul",{style:c,children:a?Object(r.jsxs)("li",{className:"drop-nav",children:[Object(r.jsxs)(j.b,{to:"#",className:"avatar",children:[Object(r.jsx)("img",{src:t.avatar,alt:""})," ",t.name," ",Object(r.jsx)("i",{className:"fas fa-angle-down"})]}),Object(r.jsxs)("ul",{className:"dropdown",children:[Object(r.jsx)("li",{children:Object(r.jsx)(j.b,{to:"/profile",children:"Profile"})}),Object(r.jsx)("li",{children:Object(r.jsx)(j.b,{to:"/",onClick:s,children:"Logout"})})]})]}):Object(r.jsx)("li",{children:Object(r.jsxs)(j.b,{to:"/login",children:[Object(r.jsx)("i",{className:"fas fa-user"})," Sign in"]})})})]})},h=a(9),m=a(8),f=a(2),x=a(7),v=(a(69),function(e){return Object(r.jsx)("div",{className:"errMsg",children:e})}),g=function(e){return Object(r.jsx)("div",{className:"successMsg",children:e})},w={LOGIN:"LOGIN",GET_TOKEN:"GET_TOKEN",GET_USER:"GET_USER",GET_ALL_USERS:"GET_ALL_USERS"},y=function(){return{type:w.LOGIN}},k=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/users/infor",{headers:{Authorization:t}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=a(37),N=a(38),E=a.n(N),S={email:"",password:"",err:"",success:""};var L=function(){var e=Object(s.useState)(S),t=Object(x.a)(e,2),a=t[0],c=t[1],n=Object(d.b)(),i=Object(h.f)(),o=a.email,b=a.password,O=a.err,w=a.success,k=function(e){var t,r=e.target,s=r.name,n=r.value;c(Object(f.a)(Object(f.a)({},a),{},(t={},Object(m.a)(t,s,n),Object(m.a)(t,"err",""),Object(m.a)(t,"success",""),t)))},N=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p.a.post("/users/login",{email:o,password:b});case 4:r=e.sent,c(Object(f.a)(Object(f.a)({},a),{},{err:"",success:r.data.msg})),localStorage.setItem("firstLogin",!0),n(y()),i.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response.data.msg&&c(Object(f.a)(Object(f.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/users/google_login",{tokenId:t.tokenId});case 3:r=e.sent,c(Object(f.a)(Object(f.a)({},a),{},{error:"",success:r.data.msg})),localStorage.setItem("firstLogin",!0),n(y()),i.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response.data.msg&&c(Object(f.a)(Object(f.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(u.a.mark((function e(t){var r,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.accessToken,s=t.userID,e.next=4,p.a.post("/users/facebook_login",{accessToken:r,userID:s});case 4:o=e.sent,c(Object(f.a)(Object(f.a)({},a),{},{error:"",success:o.data.msg})),localStorage.setItem("firstLogin",!0),n(y()),i.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response.data.msg&&c(Object(f.a)(Object(f.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"login_page",children:[Object(r.jsx)("h2",{children:"Login"}),O&&v(O),w&&g(w),Object(r.jsxs)("form",{onSubmit:N,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(r.jsx)("input",{type:"text",placeholder:"Enter email address",id:"email",value:o,name:"email",onChange:k})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"password",children:"Password"}),Object(r.jsx)("input",{type:"password",placeholder:"Enter password",id:"password",value:b,name:"password",onChange:k})]}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("button",{type:"submit",children:"Login"}),Object(r.jsx)(j.b,{to:"/forgot_password",children:"Forgot your password?"})]})]}),Object(r.jsx)("div",{className:"hr",children:"Or Login With"}),Object(r.jsxs)("div",{className:"social",children:[Object(r.jsx)(_.GoogleLogin,{clientId:"720561311023-ngl368f9dc8q09eomupnfh51ck7kg3nr.apps.googleusercontent.com",buttonText:"Login with google",onSuccess:L,cookiePolicy:"single_host_origin"}),Object(r.jsx)(E.a,{appId:"747793779163376",autoLoad:!1,fields:"name,email,picture",callback:A})]}),Object(r.jsxs)("p",{children:["New Customer? ",Object(r.jsx)(j.b,{to:"/register",children:"Register"})]})]})},A=function(e){return!e},C=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},T=function(e){return e.length<8},F=function(e,t){return e===t},I={name:"",email:"",password:"",cf_password:"",err:"",success:""};var P=function(){var e=Object(s.useState)(I),t=Object(x.a)(e,2),a=t[0],c=t[1],n=a.name,i=a.email,o=a.password,d=a.cf_password,b=a.err,O=a.success,h=function(e){var t,r=e.target,s=r.name,n=r.value;c(Object(f.a)(Object(f.a)({},a),{},(t={},Object(m.a)(t,s,n),Object(m.a)(t,"err",""),Object(m.a)(t,"success",""),t)))},w=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!A(n)&&!A(o)){e.next=3;break}return e.abrupt("return",c(Object(f.a)(Object(f.a)({},a),{},{err:"Please fill in all fields.",success:""})));case 3:if(C(i)){e.next=5;break}return e.abrupt("return",c(Object(f.a)(Object(f.a)({},a),{},{err:"Invalid email address.",success:""})));case 5:if(!T(o)){e.next=7;break}return e.abrupt("return",c(Object(f.a)(Object(f.a)({},a),{},{err:"Password must be at least 8 characters.",success:""})));case 7:if(F(o,d)){e.next=9;break}return e.abrupt("return",c(Object(f.a)(Object(f.a)({},a),{},{err:"Password do not match.",success:""})));case 9:return e.prev=9,e.next=12,p.a.post("/users/register",{name:n,email:i,password:o});case 12:r=e.sent,c(Object(f.a)(Object(f.a)({},a),{},{err:"",success:r.data.msg})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),e.t0.response.data.msg&&c(Object(f.a)(Object(f.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"login_page",children:[Object(r.jsx)("h2",{children:"Register"}),b&&v(b),O&&g(O),Object(r.jsxs)("form",{onSubmit:w,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"name",children:"Name"}),Object(r.jsx)("input",{type:"text",placeholder:"Enter your name",id:"name",value:n,name:"name",onChange:h})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(r.jsx)("input",{type:"text",placeholder:"Enter your email address",id:"email",value:i,name:"email",onChange:h})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"password",children:"Password"}),Object(r.jsx)("input",{type:"password",placeholder:"Enter your password",id:"password",value:o,name:"password",onChange:h})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"cf_password",children:"Confirm password"}),Object(r.jsx)("input",{type:"password",placeholder:"Confirm your password",id:"cf_password",value:d,name:"cf_password",onChange:h})]}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("button",{type:"submit",children:"Register"})})]}),Object(r.jsxs)("p",{children:["Already have an account ? ",Object(r.jsx)(j.b,{to:"/login",children:"Login"})," "]})]})};var U=function(){var e=Object(h.g)().activation_token,t=Object(s.useState)(""),a=Object(x.a)(t,2),c=a[0],n=a[1],i=Object(s.useState)(""),o=Object(x.a)(i,2),j=o[0],d=o[1];return Object(s.useEffect)((function(){e&&function(){var t=Object(l.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.post("/users/activation",{activation_token:e});case 3:a=t.sent,console.log("Test1"),d(a.data.msg),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response.data.msg&&n(t.t0.response.data.msg);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()()}),[e]),Object(r.jsxs)("div",{className:"activa_page",children:[c&&v(c),j&&g(j)]})};var G=function(){return Object(r.jsx)("div",{children:"404 | Not Found"})},R={email:"",err:"",success:""};var D=function(){var e=Object(s.useState)(R),t=Object(x.a)(e,2),a=t[0],c=t[1],n=a.email,i=a.err,o=a.success,j=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(n)){e.next=2;break}return e.abrupt("return",c(Object(f.a)(Object(f.a)({},a),{},{err:"Invalid email address.",success:""})));case 2:return e.prev=2,e.next=5,p.a.post("/users/forgot_password",{email:n});case 5:return t=e.sent,e.abrupt("return",c(Object(f.a)(Object(f.a)({},a),{},{err:"",success:t.data.msg})));case 9:e.prev=9,e.t0=e.catch(2),e.t0.response.data.msg&&c(Object(f.a)(Object(f.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"fg_pass",children:[Object(r.jsx)("h2",{children:"Forgot Your Password ?"}),Object(r.jsxs)("div",{className:"row",children:[i&&v(i),o&&g(o),Object(r.jsx)("label",{htmlFor:"email",children:"Enter your email address"}),Object(r.jsx)("input",{type:"text",name:"email",id:"email",value:n,onChange:function(e){var t,r=e.target,s=r.name,n=r.value;c(Object(f.a)(Object(f.a)({},a),{},(t={},Object(m.a)(t,s,n),Object(m.a)(t,"err",""),Object(m.a)(t,"success",""),t)))}}),Object(r.jsx)("button",{onClick:j,children:"Verify your email"})]})]})},z={password:"",cf_password:"",err:"",success:""};var Y=function(){var e=Object(s.useState)(z),t=Object(x.a)(e,2),a=t[0],c=t[1],n=Object(h.g)().token,i=a.password,o=a.cf_password,j=a.err,d=a.success,b=function(e){var t,r=e.target,s=r.name,n=r.value;c(Object(f.a)(Object(f.a)({},a),{},(t={},Object(m.a)(t,s,n),Object(m.a)(t,"err",""),Object(m.a)(t,"success",""),t)))},O=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T(i)){e.next=2;break}return e.abrupt("return",c(Object(f.a)(Object(f.a)({},a),{},{err:"Password must be at least 8 characters.",success:""})));case 2:if(F(i,o)){e.next=4;break}return e.abrupt("return",c(Object(f.a)(Object(f.a)({},a),{},{err:"Password did not match.",success:""})));case 4:return e.prev=4,e.next=7,p.a.post("/users/reset",{password:i},{headers:{Authorization:n}});case 7:return t=e.sent,e.abrupt("return",c(Object(f.a)(Object(f.a)({},a),{},{err:"",success:t.data.msg})));case 11:e.prev=11,e.t0=e.catch(4),e.t0.response.data.msg&&c(Object(f.a)(Object(f.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"fg_pass",children:[Object(r.jsx)("h2",{children:"Reset Your Password"}),Object(r.jsxs)("div",{className:"row",children:[j&&v(j),d&&g(d),Object(r.jsx)("label",{htmlFor:"password",children:"Password"}),Object(r.jsx)("input",{type:"password",name:"password",id:"password",value:i,onChange:b}),Object(r.jsx)("label",{htmlFor:"cf_password",children:"Confirm Password"}),Object(r.jsx)("input",{type:"password",name:"cf_password",id:"cf_password",value:o,onChange:b}),Object(r.jsx)("button",{onClick:O,children:"Reset Password"})]})]})},V=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/users/all_infor",{headers:{Authorization:t}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B={name:"",password:"",cf_password:"",err:"",success:""};var M=function(){var e=Object(d.c)((function(e){return e.auth})),t=Object(d.c)((function(e){return e.token})),a=Object(d.c)((function(e){return e.users})),c=e.user,n=e.isAdmin,i=Object(s.useState)(B),o=Object(x.a)(i,2),b=o[0],O=o[1],h=b.name,y=b.password,k=b.cf_password,_=b.err,N=b.success,E=Object(s.useState)(!1),S=Object(x.a)(E,2),L=S[0],A=S[1],C=Object(s.useState)(!1),I=Object(x.a)(C,2),P=I[0],U=I[1],G=Object(s.useState)(!1),R=Object(x.a)(G,2),D=R[0],z=R[1],Y=Object(d.b)();Object(s.useEffect)((function(){n&&V(t).then((function(e){Y(function(e){return{type:w.GET_ALL_USERS,payload:e.data}}(e))}))}),[t,n,Y,D]);var M=function(e){var t,a=e.target,r=a.name,s=a.value;O(Object(f.a)(Object(f.a)({},b),{},(t={},Object(m.a)(t,r,s),Object(m.a)(t,"err",""),Object(m.a)(t,"success",""),t)))},X=function(){var e=Object(l.a)(u.a.mark((function e(a){var r,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,r=a.target.files[0]){e.next=5;break}return e.abrupt("return",O(Object(f.a)(Object(f.a)({},b),{},{err:"No files were uploaded.",success:""})));case 5:if(!(r.size>1048576)){e.next=7;break}return e.abrupt("return",O(Object(f.a)(Object(f.a)({},b),{},{err:"Size too large.",success:""})));case 7:if("image/jpeg"===r.type||"image/png"===r.type){e.next=9;break}return e.abrupt("return",O(Object(f.a)(Object(f.a)({},b),{},{err:"File format is incorrect.",success:""})));case 9:return(s=new FormData).append("file",r),U(!0),e.next=14,p.a.post("/api/upload_avatar",s,{headers:{"content-type":"multipart/form-data",Authorization:t}});case 14:c=e.sent,U(!1),A(c.data.url),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),O(Object(f.a)(Object(f.a)({},b),{},{err:e.t0.response.data.msg,success:""}));case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c._id===a){e.next=8;break}if(!window.confirm("Are you sure you want to delete this account?")){e.next=8;break}return U(!0),e.next=6,p.a.delete("/users/delete/".concat(a),{headers:{Authorization:t}});case 6:U(!1),z(!D);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),O(Object(f.a)(Object(f.a)({},b),{},{err:e.t0.response.data.msg,success:""}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{children:[_&&v(_),N&&g(N),P&&Object(r.jsx)("h3",{children:"Loading....."})]}),Object(r.jsxs)("div",{className:"profile_page",children:[Object(r.jsxs)("div",{className:"col-left",children:[Object(r.jsx)("h2",{children:n?"Admin Profile":"User Profile"}),Object(r.jsxs)("div",{className:"avatar",children:[Object(r.jsx)("img",{src:L||c.avatar,alt:""}),Object(r.jsxs)("span",{children:[Object(r.jsx)("i",{className:"fas fa-camera"}),Object(r.jsx)("p",{children:"Change"}),Object(r.jsx)("input",{type:"file",name:"file",id:"file_up",onChange:X})]})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"name",children:"Name"}),Object(r.jsx)("input",{type:"text",name:"name",id:"name",defaultValue:c.name,placeholder:"Your name",onChange:M})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"email",children:"Email"}),Object(r.jsx)("input",{type:"email",name:"email",id:"email",defaultValue:c.email,placeholder:"Your email address",disabled:!0})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"password",children:"New Password"}),Object(r.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Your password",value:y,onChange:M})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"cf_password",children:"Confirm New Password"}),Object(r.jsx)("input",{type:"password",name:"cf_password",id:"cf_password",placeholder:"Confirm password",value:k,onChange:M})]}),Object(r.jsx)("div",{children:Object(r.jsx)("em",{style:{color:"crimson"},children:"* If you update your password here, you will not be able to login quickly using google and facebook."})}),Object(r.jsx)("button",{disabled:P,onClick:function(){(h||L)&&function(){try{p.a.patch("/users/update",{name:h||c.name,avatar:L||c.avatar},{headers:{Authorization:t}}),O(Object(f.a)(Object(f.a)({},b),{},{err:"",success:"Updated Success!"}))}catch(_){O(Object(f.a)(Object(f.a)({},b),{},{err:_.response.data.msg,success:""}))}}(),y&&function(){if(T(y))return O(Object(f.a)(Object(f.a)({},b),{},{err:"Password must be at least 6 characters.",success:""}));if(!F(y,k))return O(Object(f.a)(Object(f.a)({},b),{},{err:"Password did not match.",success:""}));try{p.a.post("/users/reset",{password:y},{headers:{Authorization:t}}),O(Object(f.a)(Object(f.a)({},b),{},{err:"",success:"Updated Success!"}))}catch(_){O(Object(f.a)(Object(f.a)({},b),{},{err:_.response.data.msg,success:""}))}}()},children:"Update"})]}),Object(r.jsxs)("div",{className:"col-right",children:[Object(r.jsx)("h2",{children:n?"Users":"My Orders"}),Object(r.jsx)("div",{style:{overflowX:"auto"},children:Object(r.jsxs)("table",{className:"customers",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"ID"}),Object(r.jsx)("th",{children:"Name"}),Object(r.jsx)("th",{children:"Email"}),Object(r.jsx)("th",{children:"Admin"}),Object(r.jsx)("th",{children:"Action"})]})}),Object(r.jsx)("tbody",{children:a.map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e._id}),Object(r.jsx)("td",{children:e.name}),Object(r.jsx)("td",{children:e.email}),Object(r.jsx)("td",{children:1===e.role?Object(r.jsx)("i",{className:"fas fa-check",title:"Admin"}):Object(r.jsx)("i",{className:"fas fa-times",title:"User"})}),Object(r.jsxs)("td",{children:[Object(r.jsx)(j.b,{to:"/edit_user/".concat(e._id),children:Object(r.jsx)("i",{className:"fas fa-edit",title:"Edit"})}),Object(r.jsx)("i",{className:"fas fa-trash-alt",title:"Remove",onClick:function(){return K(e._id)}})]})]},e._id)}))})]})})]})]})]})};var X=function(){var e=Object(h.g)().id,t=Object(h.f)(),a=Object(s.useState)([]),c=Object(x.a)(a,2),n=c[0],i=c[1],o=Object(d.c)((function(e){return e.users})),j=Object(d.c)((function(e){return e.token})),b=Object(s.useState)(!1),O=Object(x.a)(b,2),m=O[0],f=O[1],w=Object(s.useState)(!1),y=Object(x.a)(w,2),k=y[0],_=y[1],N=Object(s.useState)(!1),E=Object(x.a)(N,2),S=E[0],L=E[1],A=Object(s.useState)(0),C=Object(x.a)(A,2),T=C[0],F=C[1];Object(s.useEffect)((function(){0!==o.length?o.forEach((function(t){t._id===e&&(i(t),f(1===t.role))})):t.push("/profile")}),[o,e,t]);var I=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,T%2===0){e.next=7;break}return e.next=4,p.a.patch("/users/update_role/".concat(n._id),{role:m?1:0},{headers:{Authorization:j}});case 4:t=e.sent,L(t.data.msg),F(0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response.data.msg&&_(e.t0.response.data.msg);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"profile_page edit_user",children:[Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("button",{onClick:function(){return t.goBack()},className:"go_back",children:[Object(r.jsx)("i",{className:"fas fa-long-arrow-alt-left"})," Go Back"]})}),Object(r.jsxs)("div",{className:"col-left",children:[Object(r.jsx)("h2",{children:"Edit User"}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"name",children:"Name"}),Object(r.jsx)("input",{type:"text",name:"name",defaultValue:n.name,disabled:!0})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"email",children:"Email"}),Object(r.jsx)("input",{type:"email",name:"email",defaultValue:n.email,disabled:!0})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("input",{type:"checkbox",id:"isAdmin",checked:m,onChange:function(){L(""),_(""),f(!m),F(T+1)}}),Object(r.jsx)("label",{htmlFor:"isAdmin",children:"isAdmin"})]}),Object(r.jsx)("button",{onClick:I,children:"Update"}),k&&v(k),S&&g(S)]})]})};a(70);var K=function(){return Object(r.jsxs)("div",{className:"home_page",children:[Object(r.jsx)("h2",{children:"Hello everyone!"}),Object(r.jsx)("p",{children:"This site is about user authentication, so there won't be any other pages here. If people want to see more about how to create other websites. You can click on the link below, visit my youtube channel. And if you find it useful, please subscribe for us. Thank you very much!"}),Object(r.jsx)("a",{href:"https://www.youtube.com/c/DevATHTML",target:"_blank",rel:"noopener noreferrer",children:"My Youtube"}),Object(r.jsx)("h3",{children:"Build a simple e-commerce site."}),Object(r.jsx)("a",{href:"https://youtu.be/uXl77UFkrkQ",target:"_blank",rel:"noopener noreferrer",children:"Build a Ecommerce"})]})};var q=function(){var e=Object(d.c)((function(e){return e.auth})),t=e.isLogged,a=e.isAdmin;return Object(r.jsx)("section",{children:Object(r.jsxs)(h.c,{children:[Object(r.jsx)(h.a,{path:"/",component:K,exact:!0}),Object(r.jsx)(h.a,{path:"/login",component:t?G:L,exact:!0}),Object(r.jsx)(h.a,{path:"/register",component:t?G:P,exact:!0}),Object(r.jsx)(h.a,{path:"/forgot_password",component:t?G:D,exact:!0}),Object(r.jsx)(h.a,{path:"/users/reset/:token",component:t?G:Y,exact:!0}),Object(r.jsx)(h.a,{path:"/profile",component:t?M:G,exact:!0}),Object(r.jsx)(h.a,{path:"/user/activate/:activation_token",component:U,exact:!0}),Object(r.jsx)(h.a,{path:"/edit_user/:id",component:a?X:G,exact:!0})]})})};var H=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.token})),a=Object(d.c)((function(e){return e.auth}));return Object(s.useEffect)((function(){localStorage.getItem("firstLogin")&&function(){var t=Object(l.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("/users/refresh_token",null);case 2:a=t.sent,e({type:"GET_TOKEN",payload:a.data.access_Token});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[a.isLogged,e]),Object(s.useEffect)((function(){if(t){e(y()),k(t).then((function(t){e(function(e){return{type:w.GET_USER,payload:{user:e.data,isAdmin:1===e.data.role}}}(t))}))}}),[t,e]),Object(r.jsx)(j.a,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(O,{}),Object(r.jsx)(q,{})]})})},J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,72)).then((function(t){var a=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,n=t.getTTFB;a(e),r(e),s(e),c(e),n(e)}))},Z=a(18),Q={user:[],isLogged:!1,isAdmin:!1},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.LOGIN:return Object(f.a)(Object(f.a)({},e),{},{isLogged:!0});case w.GET_USER:return Object(f.a)(Object(f.a)({},e),{},{user:t.payload.user,isAdmin:t.payload.isAdmin});default:return e}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.GET_TOKEN:return t.payload;default:return e}},ee=[],te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.GET_ALL_USERS:return t.payload;default:return e}},ae=Object(Z.b)({auth:W,token:$,users:te}),re=Object(Z.c)(ae,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var se=function(e){var t=e.children;return Object(r.jsx)(d.a,{store:re,children:t})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(se,{children:Object(r.jsx)(H,{})})}),document.getElementById("root")),J()}},[[71,1,2]]]);
//# sourceMappingURL=main.36188d32.chunk.js.map